# ex_calculator_rest
The SOAP based calculator web services demo refactored as RESTful

This example was refactored after Genero 3.20 to use the new high-level RESTful Web Services.  

This example takes the SOAP based calculator web services demo that is shipped in the Genero product as FGLDIR/demo/WebServices/calculator and has refeactored it to use RESTful techniques.

It consists of two programs, calculatorServer and calculatorClient.  Build and run the calculatorServer example, leave it running, and then run the calculatorClient example.   Communication is controlled via FGLAPPSERVER environment variable.  The Studio project sets it to 8092, but you are free to change it to a different port.

![Screen Shot 2022-05-26 at 12 05 53 PM](https://user-images.githubusercontent.com/13615993/170388960-aac83373-e4e1-4abd-870c-f811ac8a4564.png)

The file calculatorClient.4gl is generated by running fglrestul -o calculatorClient.4gl "http://localhost:8092/Calculator?openapi.json"

If you are having trouble configuring and running, note the screenshot below ...

![Screen Shot 2022-05-26 at 12 07 19 PM](https://user-images.githubusercontent.com/13615993/170389022-5c540a9a-1287-47b3-888e-d3679ba23839.png)

Note how calculatorClient is default app.

To launch the server program you can either ...
In Studio, right-click on calculatorServer app to launch the server program first
OR Start the client program and click the Start button. 

With the calculatorClient program note the following errors ...

Note what is returned if you leave an Operand value blank.  Should see Status = -1. Code = 400. Description = Rest query parameter not found.  This is how you would typically handle errors with what is passed to the web service

![Screen Shot 2022-05-26 at 12 17 48 PM](https://user-images.githubusercontent.com/13615993/170389931-a6bfcaae-b093-4146-ac78-7a9a6b3a829a.png)


Note what is returned if you attempt an opeartion without starting the error.  Should see Status = -1. Code = -15553. Description = Asychronous Connection failed.  This is how you would see infrastructure errors handled.

![Screen Shot 2022-05-26 at 12 17 31 PM](https://user-images.githubusercontent.com/13615993/170389935-a2041450-4d07-45ab-a22d-96065a51ce71.png)



